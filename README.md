# Тестовое задание

> Примерное время выполнения: 2-4 ч.

## Введение

В тестовом задании необходимо написать GraphQL API для простого мобильного приложения.

Мобильное приложение - это примитивный мессенджер.

> Общий функциональный смысл приложения: Пользователь (User) выполняет вход со своим логином и паролем, видит список своих Чатов (Threads), может зайти в любой из них и написать Сообщение (Message). Сообщения могут содержать только текст.

Дополнительно необходимо написать панель администратора на Laravel Nova, где администратор сможет просматривать / добавлять / удалять Юзеров, Чаты и Сообщения.

Реализация должна быть на базе стека:

- Laravel 7+
- MySQL 5.7
- Redis (cache, queue)
- Laravel Nova (zip-архив в корне проекта) для админ-панели
- [Lighthouse PHP](https://lighthouse-php.com/) для реализации GraphQL
- Laravel Passport для аутентификации
- Бибилиотека [Laravel Messenger](https://github.com/cmgmyr/laravel-messenger) для чатов

### На что обратить внимание

1. Число непрочитанных сообщений для каждого Юзера (и отдельно для каждого Чата) должно корректно рассчитываться и обновляться: 1) при прочтении Чата и 2) при написании нового Сообщения.
2. GraphQL запросы для получения списков (список Чатов / список Сообщений) должны поддерживать пагинацию (offset или cursor)

### Дополнительно можно сделать (будет считаться плюсом)

1. Кеширование данных в Redis (число непрочитанных, параметры Сообщений и др.)
2. Риалтайм точка доступа (WebSocket) для подписки на новые Сообщения (предпочтительно через GraphQL Subscriptions). Можно реализовать на базе Pusher (ключи см. ниже).
3. Простую веб-версию клиента чатов. Можно взять любой фреймворк на выбор - Vue / React / Livewire и др.
4. Покрыть GraphQL API тестами.

## Ключи Pusher


```yml
# .env
PUSHER_APP_ID=1159411
PUSHER_APP_KEY=cd541df38b0b9be04a1b
PUSHER_APP_SECRET=9d0f871042a3ea8186a3
```

```php
# config/broadcasting.php
'options' => [
  'cluster' => 'eu',
  'useTLS' => true
],
```


## Результат

Для проверки работоспособности API необходимо подключить [GraphQL Playground](https://github.com/mll-lab/laravel-graphql-playground).

Итоговый код необходимо предоставить в виде пулл-реквеста в текущий репозиторий (целевая ветка: master).

Также необходимо предоставить инструкции по развертыванию приложения в виде файла DEPLOY.md в корне проекта.
